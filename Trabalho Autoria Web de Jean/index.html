<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Enciclop√©dia ‚Äî One Piece / Attack on Titan / Boku no Hero</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #242424;
    --bg2: #2a2a2a;
    --card-bg: #3a3a3a;
    --border: #555;
    --hover-glow: rgba(200,200,200,0.25);
  }
  body{
    margin:0;
    font-family:'Inter',sans-serif;
    background: linear-gradient(180deg, var(--bg1), var(--bg2));
    color: #fff;
  }
  .title-font{
    font-family:"Playfair Display", serif;
    font-weight:700;
    letter-spacing:1px;
  }
  .hero{
    background: linear-gradient(#0006,#0006);
    padding:36px 16px;
    text-align:center;
    border-bottom:2px solid rgba(255,255,255,0.07);
  }
  .controls{
    margin-top:18px;
    display:flex;
    gap:12px;
    justify-content:center;
    flex-wrap:wrap;
    align-items:center;
  }
  .anime-select{
    min-width:220px;
    background:#3a3a3a;
    border:1px solid var(--border);
    color:#fff;
  }
  .anime-select:focus{
    border-color:#888;
    box-shadow:0 0 0 3px rgba(180,180,180,0.35);
  }
  .input-group-text{
    background:#3a3a3a;
    border:1px solid var(--border);
    color:#fff;
  }
  .form-control{
    background:#303030;
    border:1px solid var(--border);
    color:#fff;
  }
  .form-control:focus{
    background:#303030;
    border-color:#888;
    box-shadow:0 0 0 3px rgba(180,180,180,0.35);
  }
  #countLabel{
    min-width:120px;
    text-align:center;
    font-size:.9rem;
    color:#dbdbdb;
  }
  .card{
    background: var(--card-bg);
    border:1px solid var(--border);
    border-radius:12px;
    overflow:hidden;
    cursor:pointer;
    transition: transform .25s ease, box-shadow .25s ease;
  }
  .card-img-top{
    height:180px;
    object-fit:cover;
    width:100%;
    transition: transform .28s ease;
  }
  .card:hover{
    transform: translateY(-6px);
    box-shadow: 0 12px 30px var(--hover-glow);
    border-color:#aaa;
  }
  .card:hover .card-img-top{
    transform: scale(1.06) rotate(-1deg);
    filter: brightness(1.05);
  }
  .card-body{
    padding:12px;
  }
  .card-title{
    font-size:1rem;
    margin-bottom:6px;
    color:#fff;
  }
  .card-text{
    font-size:.85rem;
    color:#d0d0d0;
    margin:0;
  }
  .modal-content{
    background:#f3f3f3;
    color:#000;
    border-radius:10px;
  }
  .modal-body p{
    margin-bottom:.7rem;
  }
  .search-highlight{
    background: rgba(191,191,191,0.12);
    padding:6px 8px;
    border-radius:8px;
    display:inline-block;
    margin-top:8px;
  }
  @media(max-width:768px){
    .card-img-top{ height:130px; }
    .controls{ gap:8px; }
  }
</style>
</head>
<body>

<header class="hero">
  <h1 class="display-6 title-font">Enciclop√©dia de Personagens</h1>
  <p class="lead" style="color:#dcdcdc;">Escolha o anime, pesquise e clique no card para ver detalhes.</p>
  <div class="container mt-2">
    <div class="controls">
      <select id="animeSelect" class="form-select anime-select" aria-label="Selecionar anime">
        <option value="onepiece" selected>One Piece</option>
        <option value="aot">Attack on Titan</option>
        <option value="bnha">Boku no Hero</option>
      </select>
      <div style="min-width:300px; flex:1; max-width:620px;">
        <div class="input-group">
          <span class="input-group-text">üîé</span>
          <input id="searchInput" class="form-control" placeholder="Pesquisar personagem ou fun√ß√£o...">
          <button id="clearBtn" class="btn btn-outline-light">Limpar</button>
        </div>
      </div>
      <div id="countLabel">-- / --</div>
    </div>
  </div>
</header>

<main class="container my-5">
  <div id="cardsGrid" class="row g-3"></div>
</main>

<div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content text-dark">
      <div class="modal-header">
        <h5 class="modal-title title-font" id="modalTitle"></h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-5">
            <img id="modalImg" class="img-fluid rounded" alt="">
          </div>
          <div class="col-md-7">
            <h3 id="modalName"></h3>
            <p class="text-muted" id="modalRole"></p>
            <p><strong id="attrLabel1"></strong> <span id="attrValue1"></span></p>
            <p><strong id="attrLabel2"></strong> <span id="attrValue2"></span></p>
            <hr>
            <h6>Biografia</h6>
            <p id="modalBio" style="white-space:pre-wrap;"></p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const onepiece = [
  { name: "Monkey D. Luffy", role: "Capit√£o (Straw Hat)", bounty: "3,000,000,000", status: "Pirata / Yonkou", img: "Imagens/luffy.jpg", bio: `Monkey D. Luffy √© um jovem pirata movido por um sonho inabal√°vel: tornar-se o Rei dos Piratas. Desde a inf√¢ncia, Luffy demonstrou um esp√≠rito aventureiro e uma vontade de ferro, protegendo amigos e enfrentando tiranos sem hesitar. Ap√≥s comer a Fruta do Diabo que lhe conferiu corpo el√°stico, ele transformou sua maneira de lutar e sua vis√£o de liberdade, liderando sua tripula√ß√£o com lealdade incondicional. Ao longo da jornada, Luffy n√£o apenas cresce em for√ßa, mas tamb√©m em compreens√£o do peso de suas a√ß√µes, inspirando aliados e forjando um legado que desafia os poderosos do mundo.` },
  { name: "Roronoa Zoro", role: "Espadachim (Straw Hat)", bounty: "1,111,000,000", status: "Pirata / Ex-capit√£o de vilarejo (hist√≥rico)", img: "Imagens/zoro.jpg", bio: `Roronoa Zoro √© um espadachim incans√°vel cuja ambi√ß√£o √© tornar-se o maior espadachim do mundo. Treinado com disciplina e sofrimento, Zoro transformou dor em for√ßa e desenvolveu t√©cnicas que desafiam os limites humanos. Sua dedica√ß√£o ao caminho da espada √© complementada por um senso inabal√°vel de honra e lealdade para com seus companheiros de tripula√ß√£o. Mesmo quando enfrenta feridas e desafios esmagadores, Zoro mant√©m a compostura fria e a determina√ß√£o que o tornam um pilar t√°tico em batalhas.` },
  { name: "Nami", role: "Navegadora / Cart√≥grafa", bounty: "366,000,000", status: "Pirata / Especialista em navega√ß√£o", img: "Imagens/nami.jpg", bio: `Nami √© uma navegadora brilhante cujo talento para cartografia e controle meteorol√≥gico a torna indispens√°vel em qualquer tripula√ß√£o que deseje conquistar os mares. Sua intelig√™ncia pr√°tica e senso de economia contrasta com sua coragem em situa√ß√µes de combate e explora√ß√£o.` },
  { name: "Usopp", role: "Atirador / Inventor", bounty: "500,000,000", status: "Pirata / Sniper", img: "Imagens/usopp.jpg", bio: `Usopp come√ßou como um contador de hist√≥rias e evoluiu para um atirador e inventor de grande engenhosidade. Sua habilidade de adapta√ß√£o e inventividade transformaram-no em um combatente singular.` },
  { name: "Sanji", role: "Cozinheiro / Lutador", bounty: "1,032,000,000", status: "Pirata / Chefe de cozinha", img: "Imagens/sanji.jpg", bio: `Sanji √© um mestre da culin√°ria e das artes marciais, conhecido tanto por suas receitas quanto por seus poderosos chutes de combate.` },
  { name: "Tony Tony Chopper", role: "M√©dico", bounty: "1,000", status: "Pirata / M√©dico", img: "Imagens/chopper.jpg", bio: `Tony Tony Chopper √© um m√©dico renascentista que possui um intelecto e habilidades m√©dicas profundas. Como usu√°rio de uma Fruta do Diabo que lhe permite transformar seu corpo, Chopper aplica conhecimentos de biologia e medicina para tratar ferimentos.` },
  { name: "Nico Robin", role: "Arque√≥loga", bounty: "930,000,000", status: "Pirata / Arque√≥loga", img: "Imagens/nico robin.jpg", bio: `Nico Robin √© uma arque√≥loga enigm√°tica cuja busca pelo saber e compreens√£o do passado a coloca no centro de conspira√ß√µes hist√≥ricas.` },
  { name: "Franky", role: "Ciborgue / Engenheiro", bounty: "394,000,000", status: "Pirata / Carpinteiro", img: "Imagens/franky.jpg", bio: `Franky √© um engenheiro brilhante que transformou seu pr√≥prio corpo em um arsenal mec√¢nico para construir navios e armas.` },
  { name: "Brook", role: "M√∫sico / Espadachim", bounty: "383,000,000", status: "Pirata / M√∫sico", img: "Imagens/brook.jpg", bio: `Brook √© um m√∫sico-espadachim de personalidade exc√™ntrica que traz humor e leveza, mas tamb√©m possui um passado tr√°gico que fortaleceu sua determina√ß√£o.` },
  { name: "Jinbe", role: "Timonel / Lutador", bounty: "1,100,000,000", status: "Pirata / Ex-Shichibukai", img: "Imagens/jimbe.jpg", bio: `Jinbe √© um homem do mar com um passado de honra e diplomacia, que combina for√ßa f√≠sica e experi√™ncia pol√≠tica.` },
  { name: "Trafalgar D. Water Law", role: "Capit√£o / M√©dico cir√∫rgico", bounty: "3,000,000,000", status: "Pirata / Supernova", img: "Imagens/law.jpg", bio: `Trafalgar Law √© um m√©dico e estrategista frio e calculista, cujo passado traum√°tico moldou seu desejo por justi√ßa e controle.` },
  { name: "Shanks", role: "Yonkou / L√≠der", bounty: "4,048,900,000", status: "Yonkou / Ex-Ajudante de Roger", img: "Imagens/shanks.jpg", bio: `Shanks √© um pirata enigm√°tico que personifica influ√™ncia e carisma, capaz de deter conflitos apenas com presen√ßa e reputa√ß√£o.` }
];

const aot = [
  { name: "Eren Yeager", role: "Tit√£ / Protagonista", nation: "Eldiano", img: "Imagens/eren yeager.jpg", bio: `Eren Yeager √© uma figura complexa cuja jornada transforma profundamente o destino do mundo. Movido inicialmente por √≥dio aos tit√£s, Eren expande sua vis√£o at√© abra√ßar medidas extremas em nome da liberdade do seu povo.`, role_desc: "Tit√£ Fundador / Personagem central" },
  { name: "Mikasa Ackerman", role: "Soldado de elite", nation: "Eldiana", img: "Imagens/mikasa.jpg", bio: `Mikasa √© uma combatente inigual√°vel, cujo talento nato e lealdade quase absoluta a Eren a definem como uma das figuras mais temidas e respeitadas nas linhas de defesa da humanidade.`, role_desc: "Soldado de elite / Tit√£ (em certas fases)" },
  { name: "Armin Arlert", role: "Estrat√©gia / Tit√£ Colossal", nation: "Eldiana", img: "Imagens/armin.jpg", bio: `Armin √© um pensador brilhante cuja for√ßa reside na intelig√™ncia t√°tica e na capacidade de elaborar planos coerentes sob press√£o.`, role_desc: "Tit√£ Colossal / Estrategista" },
  { name: "Levi Ackerman", role: "Capit√£o de Esquadr√£o", nation: "Eldiana", img: "Imagens/levi.jpg", bio: `Levi Ackerman √© reconhecido como o soldado mais forte da humanidade, uma figura moldada pela dura vida nas ruas e por perdas que forjaram um senso de disciplina inabal√°vel.`, role_desc: "Soldado de elite / Executor t√°tico" },
  { name: "Hange Zoe", role: "Chefe / Ci√™ncia", nation: "Eldiana", img: "Imagens/hange.jpg", bio: `Hange √© movida por curiosidade cient√≠fica e pela obsess√£o por compreender os tit√£s. Sua abordagem combina brilhantismo e entusiasmo.`, role_desc: "L√≠der cient√≠fica / Exploradora" },
  { name: "Reiner Braun", role: "Guerreiro / Tit√£ Blindado", nation: "Marleyano", img: "Imagens/reiner.jpg", bio: `Reiner √© um personagem dividido entre o dever de um guerreiro e o peso das mem√≥rias pessoais.`, role_desc: "Tit√£ Blindado / Guerreiro" },
  { name: "Annie Leonhart", role: "Guerreiro / Tit√£ F√™mea", nation: "Marleyano", img: "Imagens/annie.jpg", bio: `Annie √© uma guerreira reservada e letal, cuja habilidade t√©cnica e controle emocional a tornam um oponente formid√°vel.`, role_desc: "Tit√£ F√™mea / Infiltradora" },
  { name: "Zeke Yeager", role: "Tit√£ Bestial / Estrategista", nation: "Marleyano (origem eldiana)", img: "Imagens/zeke.jpg", bio: `Zeke Yeager √© um estrategista calculista cujo papel nas tramas envolve manipula√ß√£o e objetivos ideol√≥gicos complexos.`, role_desc: "Tit√£ Bestial / Conspirador" },
  { name: "Pieck Finger", role: "Tit√£ Carro√ßa / Suporte t√°tico", nation: "Marleyano", img: "Imagens/pieck.jpg", bio: `Pieck √© uma figura que combina intelig√™ncia e utilidade em batalha, usando sua forma tit√¢nica especializada para transporte e apoio log√≠stico.`, role_desc: "Tit√£ de suporte / Log√≠stica" },
  { name: "Porco Galliard", role: "Tit√£ Mand√≠bula", nation: "Eldiano", img: "Imagens/galliard.jpg", bio: `Porco Galliard √© carism√°tico e feroz em combate, conhecido por habilidades de ataque devastadoras derivadas de sua forma de Tit√£ Mand√≠bula.`, role_desc: "Tit√£ Mand√≠bula / Guerreiro" },
  { name: "Ymir", role: "Tit√£ / Figura hist√≥rica", nation: "Eldiana", img: "Imagens/ymir.jpg", bio: `Ymir √© envolta em mitos e mem√≥rias que ligam as origens dos tit√£s √† hist√≥ria do mundo.`, role_desc: "Tit√£ primitivo / Mito fundador" }
];

const bnha = [
  { name: "Izuku Midoriya (Deku)", role: "Her√≥i Estudante", class: "Estudante / Her√≥i Aspirante", quirk: "One For All", img: "Imagens/midoriya.jpg", bio: `Izuku Midoriya, conhecido como Deku, √© a personifica√ß√£o da perseveran√ßa e do hero√≠smo idealista.` },
  { name: "Katsuki Bakugo", role: "Her√≥i Estudante", class: "Estudante / Her√≥i Aspirante", quirk: "Explosion", img: "Imagens/bakugo.jpg", bio: `Katsuki Bakugo √© um indiv√≠duo explosivo em personalidade e poder, cuja ambi√ß√£o e confian√ßa o impulsionam a buscar a gl√≥ria heroica.` },
  { name: "Ochaco Uraraka", role: "Hero√≠na Estudante", class: "Estudante / Her√≥ina Aspirante", quirk: "Zero Gravity", img: "Imagens/uraraka.jpg", bio: `Ochaco Uraraka √© movida por altru√≠smo e simpatia, aspirando tornar-se her√≥i n√£o por gl√≥ria, mas para garantir estabilidade financeira √† fam√≠lia e ajudar os outros.` },
  { name: "Shoto Todoroki", role: "Her√≥i Estudante", class: "Estudante / Her√≥i Aspirante", quirk: "Half-Cold Half-Hot", img: "Imagens/todoroki.jpg", bio: `Shoto Todoroki carrega o peso de uma heran√ßa familiar turbulenta, combinando poderes de gelo e fogo.` },
  { name: "All Might (Toshinori Yagi)", role: "Her√≥i (aposentado)", class: "Her√≥i Profissional / Mentor", quirk: "One For All (ex-portador)", img: "Imagens/all might.jpg", bio: `All Might √© o s√≠mbolo da paz cuja presen√ßa moldou gera√ß√µes de her√≥is.` },
  { name: "Tenya Iida", role: "Her√≥i Estudante", class: "Estudante / Her√≥i", quirk: "Engine", img: "Imagens/lida.jpg", bio: `Tenya Iida √© sin√¥nimo de disciplina, responsabilidade e velocidade t√°tica.` },
  { name: "Momo Yaoyorozu", role: "Hero√≠na Estudante", class: "Estudante / Her√≥ina Criadora", quirk: "Creation", img: "Imagens/yaoyorozu.jpg", bio: `Momo √© prod√≠gio intelectual cuja habilidade de criar objetos a torna excepcionalmente vers√°til em campo.` },
  { name: "Eijiro Kirishima", role: "Her√≥i Estudante", class: "Estudante / Her√≥i", quirk: "Hardening", img: "Imagens/kirishima.jpg", bio: `Kirishima √© a personifica√ß√£o de coragem bruta e camaradagem.` },
  { name: "Shota Aizawa (Eraser Head)", role: "Professor", class: "Her√≥i Profissional / Educador", quirk: "Erasure", img: "Imagens/aizawa.jpg", bio: `Aizawa, conhecido como Eraser Head, √© um professor severo mas eficaz.` },
  { name: "Tomura Shigaraki", role: "Vil√£o / L√≠der", class: "Vil√£o", quirk: "Decay", img: "Imagens/shigaraki.jpg", bio: `Tomura Shigaraki √© um antagonista cuja vis√£o an√°rquica e poder destrutivo representam um desafio existencial ao sistema dos her√≥is.` },
  { name: "Hawks (Keigo Takami)", role: "Her√≥i Profissional", class: "Her√≥i", quirk: "Feather (Plumagem control√°vel)", img: "Imagens/hawks.jpg", bio: `Hawks √© um her√≥i de mente r√°pida e postura descontra√≠da, usando suas penas control√°veis para reconhecimento, resgate e combate.` }
];

const DB = { onepiece, aot, bnha };

const animeSelect = document.getElementById('animeSelect');
const searchInput = document.getElementById('searchInput');
const clearBtn = document.getElementById('clearBtn');
const cardsGrid = document.getElementById('cardsGrid');
const countLabel = document.getElementById('countLabel');

const detailModal = document.getElementById('detailModal');
const modalTitle = document.getElementById('modalTitle');
const modalName = document.getElementById('modalName');
const modalRole = document.getElementById('modalRole');
const attrLabel1 = document.getElementById('attrLabel1');
const attrValue1 = document.getElementById('attrValue1');
const attrLabel2 = document.getElementById('attrLabel2');
const attrValue2 = document.getElementById('attrValue2');
const modalBio = document.getElementById('modalBio');
const modalImg = document.getElementById('modalImg');

function escapeHtml(s){
  return String(s||'').replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function updateCount(total, visible){
  countLabel.textContent = `${visible} / ${total}`;
}

function renderGridFor(key){
  const list = DB[key] || [];
  cardsGrid.innerHTML = '';
  if(list.length === 0){
    cardsGrid.innerHTML = `<div class="col-12"><div class="alert alert-warning text-dark">Nenhum personagem encontrado para este anime.</div></div>`;
    updateCount(0,0);
    return;
  }
  list.forEach(p => {
    const col = document.createElement('div');
    col.className = 'col-12 col-sm-6 col-md-4 col-lg-3';
    let dataAttrs = `data-name="${escapeHtml(p.name)}" data-role="${escapeHtml(p.role)}" data-img="${escapeHtml(p.img)}" data-bio="${escapeHtml(p.bio)}"`;
    if(key === 'onepiece'){
      dataAttrs += ` data-bounty="${escapeHtml(p.bounty || '‚Äî')}" data-status="${escapeHtml(p.status || '‚Äî')}"`;
    } else if(key === 'aot'){
      dataAttrs += ` data-nation="${escapeHtml(p.nation || '‚Äî')}" data-func="${escapeHtml(p.role_desc || p.role || '‚Äî')}"`;
    } else if(key === 'bnha'){
      dataAttrs += ` data-class="${escapeHtml(p.class || '‚Äî')}" data-quirk="${escapeHtml(p.quirk || '‚Äî')}"`;
    }
    col.innerHTML = `
      <div class="card" tabindex="0" ${dataAttrs} data-bs-toggle="modal" data-bs-target="#detailModal">
        <img src="${p.img}" class="card-img-top" alt="${escapeHtml(p.name)}">
        <div class="card-body">
          <h5 class="card-title">${p.name}</h5>
          <p class="card-text">${p.role}</p>
        </div>
      </div>
    `;
    cardsGrid.appendChild(col);
  });
  updateCount(list.length, list.length);
}

function applySearch(){
  const q = searchInput.value.trim().toLowerCase();
  const cards = Array.from(cardsGrid.querySelectorAll('.card'));
  let total = cards.length;
  let visible = 0;
  cards.forEach(card => {
    const name = (card.dataset.name || '').toLowerCase();
    const role = (card.dataset.role || '').toLowerCase();
    const extra = (card.dataset.status || card.dataset.func || card.dataset.quirk || '').toLowerCase();
    const match = (name.includes(q) || role.includes(q) || extra.includes(q));
    card.parentElement.style.display = match ? '' : 'none';
    if(match) visible++;
  });
  updateCount(total, visible);
}

detailModal.addEventListener('show.bs.modal', (ev)=>{
  const trigger = ev.relatedTarget;
  if(!trigger) return;
  const animeKey = animeSelect.value;
  modalTitle.textContent = trigger.dataset.name;
  modalName.textContent = trigger.dataset.name;
  modalRole.textContent = trigger.dataset.role || '';
  modalBio.textContent = trigger.dataset.bio || '';
  if(animeKey === 'onepiece'){
    attrLabel1.textContent = 'Recompensa:';
    attrValue1.textContent = trigger.dataset.bounty || '‚Äî';
    attrLabel2.textContent = 'Status:';
    attrValue2.textContent = trigger.dataset.status || '‚Äî';
  } else if(animeKey === 'aot'){
    attrLabel1.textContent = 'Origem:';
    attrValue1.textContent = trigger.dataset.nation || '‚Äî';
    attrLabel2.textContent = 'Fun√ß√£o:';
    attrValue2.textContent = trigger.dataset.func || trigger.dataset.role || '‚Äî';
  } else if(animeKey === 'bnha'){
    attrLabel1.textContent = 'Classe:';
    attrValue1.textContent = trigger.dataset.class || '‚Äî';
    attrLabel2.textContent = 'Poder (Quirk):';
    attrValue2.textContent = trigger.dataset.quirk || '‚Äî';
  } else {
    attrLabel1.textContent = '';
    attrValue1.textContent = '';
    attrLabel2.textContent = '';
    attrValue2.textContent = '';
  }
  modalImg.src = trigger.dataset.img || '';
});

animeSelect.addEventListener('change', ()=>{
  const key = animeSelect.value;
  renderGridFor(key);
  searchInput.value = '';
  updateCount(DB[key].length, DB[key].length);
});

searchInput.addEventListener('input', applySearch);
clearBtn.addEventListener('click', ()=>{
  searchInput.value = '';
  applySearch();
  searchInput.focus();
});

renderGridFor('onepiece');

document.addEventListener('keydown', (e) => {
  if(e.key === 'Enter'){
    const el = document.activeElement;
    if(el && el.classList && el.classList.contains('card')){
      el.click();
    }
  }
});
</script>
</body>
</html>
